{"ast":null,"code":"var _jsxFileName = \"/Users/abrahambhatti/Desktop/trainerAI/frontend/src/components/CameraFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst POSE_CONNECTIONS = [\n// Torso\n[11, 12], [11, 23], [12, 24], [23, 24],\n// Arms\n[11, 13], [13, 15], [12, 14], [14, 16],\n// Legs\n[23, 25], [25, 27], [24, 26], [26, 28]];\nconst CameraFeed = ({\n  socket,\n  landmarks\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const captureCanvasRef = useRef(null);\n  const drawCanvasRef = useRef(null);\n  useEffect(() => {\n    const setupCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (err) {\n        console.error(\"Error accessing camera: \", err);\n      }\n    };\n    setupCamera();\n    const interval = setInterval(() => {\n      if (socket && socket.connected && videoRef.current) {\n        const canvas = captureCanvasRef.current;\n        const context = canvas.getContext('2d');\n        canvas.width = videoRef.current.videoWidth;\n        canvas.height = videoRef.current.videoHeight;\n        context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n        const frame = canvas.toDataURL('image/jpeg');\n        console.log('Sending frame to backend');\n        socket.emit('video_frame', {\n          frame\n        });\n      }\n    }, 100); // Send frame every 100ms (10fps)\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [socket]);\n  useEffect(() => {\n    if (landmarks && landmarks.length > 0) {\n      const canvas = drawCanvasRef.current;\n      const ctx = canvas.getContext('2d');\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Draw connections\n      ctx.strokeStyle = 'lime';\n      ctx.lineWidth = 2;\n      POSE_CONNECTIONS.forEach(conn => {\n        const [start, end] = conn;\n        if (landmarks[start] && landmarks[end] && landmarks[start].visibility > 0.5 && landmarks[end].visibility > 0.5) {\n          ctx.beginPath();\n          ctx.moveTo(landmarks[start].x * canvas.width, landmarks[start].y * canvas.height);\n          ctx.lineTo(landmarks[end].x * canvas.width, landmarks[end].y * canvas.height);\n          ctx.stroke();\n        }\n      });\n\n      // Draw landmarks\n      ctx.fillStyle = 'red';\n      landmarks.forEach(l => {\n        if (l.visibility > 0.5) {\n          ctx.beginPath();\n          ctx.arc(l.x * canvas.width, l.y * canvas.height, 4, 0, 2 * Math.PI);\n          ctx.fill();\n        }\n      });\n    }\n  }, [landmarks]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"camera-feed\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      playsInline: true,\n      muted: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: captureCanvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: drawCanvasRef,\n      className: \"draw-canvas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraFeed, \"v6YQVY8Wz2m8LkuAzxCMIHx80tU=\");\n_c = CameraFeed;\nexport default CameraFeed;\nvar _c;\n$RefreshReg$(_c, \"CameraFeed\");","map":{"version":3,"names":["React","useRef","useEffect","jsxDEV","_jsxDEV","POSE_CONNECTIONS","CameraFeed","socket","landmarks","_s","videoRef","captureCanvasRef","drawCanvasRef","setupCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","err","console","error","interval","setInterval","connected","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","frame","toDataURL","log","emit","clearInterval","length","ctx","clearRect","strokeStyle","lineWidth","forEach","conn","start","end","visibility","beginPath","moveTo","x","y","lineTo","stroke","fillStyle","l","arc","Math","PI","fill","className","children","ref","autoPlay","playsInline","muted","fileName","_jsxFileName","lineNumber","columnNumber","style","display","_c","$RefreshReg$"],"sources":["/Users/abrahambhatti/Desktop/trainerAI/frontend/src/components/CameraFeed.js"],"sourcesContent":["\nimport React, { useRef, useEffect } from 'react';\n\nconst POSE_CONNECTIONS = [\n  // Torso\n  [11, 12], [11, 23], [12, 24], [23, 24],\n  // Arms\n  [11, 13], [13, 15], [12, 14], [14, 16],\n  // Legs\n  [23, 25], [25, 27], [24, 26], [26, 28]\n];\n\nconst CameraFeed = ({ socket, landmarks }) => {\n  const videoRef = useRef(null);\n  const captureCanvasRef = useRef(null);\n  const drawCanvasRef = useRef(null);\n\n  useEffect(() => {\n    const setupCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (err) {\n        console.error(\"Error accessing camera: \", err);\n      }\n    };\n\n    setupCamera();\n\n    const interval = setInterval(() => {\n      if (socket && socket.connected && videoRef.current) {\n        const canvas = captureCanvasRef.current;\n        const context = canvas.getContext('2d');\n        canvas.width = videoRef.current.videoWidth;\n        canvas.height = videoRef.current.videoHeight;\n        context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n        const frame = canvas.toDataURL('image/jpeg');\n        console.log('Sending frame to backend');\n        socket.emit('video_frame', { frame });\n      }\n    }, 100); // Send frame every 100ms (10fps)\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [socket]);\n\n  useEffect(() => {\n    if (landmarks && landmarks.length > 0) {\n      const canvas = drawCanvasRef.current;\n      const ctx = canvas.getContext('2d');\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Draw connections\n      ctx.strokeStyle = 'lime';\n      ctx.lineWidth = 2;\n      POSE_CONNECTIONS.forEach(conn => {\n        const [start, end] = conn;\n        if (landmarks[start] && landmarks[end] && landmarks[start].visibility > 0.5 && landmarks[end].visibility > 0.5) {\n          ctx.beginPath();\n          ctx.moveTo(landmarks[start].x * canvas.width, landmarks[start].y * canvas.height);\n          ctx.lineTo(landmarks[end].x * canvas.width, landmarks[end].y * canvas.height);\n          ctx.stroke();\n        }\n      });\n\n      // Draw landmarks\n      ctx.fillStyle = 'red';\n      landmarks.forEach(l => {\n        if (l.visibility > 0.5) {\n          ctx.beginPath();\n          ctx.arc(l.x * canvas.width, l.y * canvas.height, 4, 0, 2 * Math.PI);\n          ctx.fill();\n        }\n      });\n    }\n  }, [landmarks]);\n\n  return (\n    <div className=\"camera-feed\">\n      <video ref={videoRef} autoPlay playsInline muted />\n      <canvas ref={captureCanvasRef} style={{ display: 'none' }} />\n      <canvas ref={drawCanvasRef} className=\"draw-canvas\" />\n    </div>\n  );\n};\n\nexport default CameraFeed;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}