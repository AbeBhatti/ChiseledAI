{"ast":null,"code":"var _jsxFileName = \"/Users/abrahambhatti/Desktop/trainerAI/frontend/src/components/CameraFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CameraFeed = ({\n  ws\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    const setupCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (err) {\n        console.error(\"Error accessing camera: \", err);\n      }\n    };\n    setupCamera();\n    const interval = setInterval(() => {\n      if (ws && ws.readyState === WebSocket.OPEN && videoRef.current) {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        canvas.width = videoRef.current.videoWidth;\n        canvas.height = videoRef.current.videoHeight;\n        context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n        const frame = canvas.toDataURL('image/jpeg');\n        console.log('Sending frame to backend');\n        ws.send(JSON.stringify({\n          type: 'video_frame',\n          frame\n        }));\n      }\n    }, 100); // Send frame every 100ms (10fps)\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [ws]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"camera-feed\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      playsInline: true,\n      muted: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraFeed, \"0gwqVvoOV2or9Ql4L8GH2BGn3hc=\");\n_c = CameraFeed;\nexport default CameraFeed;\nvar _c;\n$RefreshReg$(_c, \"CameraFeed\");","map":{"version":3,"names":["React","useRef","useEffect","jsxDEV","_jsxDEV","CameraFeed","ws","_s","videoRef","canvasRef","setupCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","err","console","error","interval","setInterval","readyState","WebSocket","OPEN","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","frame","toDataURL","log","send","JSON","stringify","type","clearInterval","className","children","ref","autoPlay","playsInline","muted","fileName","_jsxFileName","lineNumber","columnNumber","style","display","_c","$RefreshReg$"],"sources":["/Users/abrahambhatti/Desktop/trainerAI/frontend/src/components/CameraFeed.js"],"sourcesContent":["\nimport React, { useRef, useEffect } from 'react';\n\nconst CameraFeed = ({ ws }) => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const setupCamera = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (err) {\n        console.error(\"Error accessing camera: \", err);\n      }\n    };\n\n    setupCamera();\n\n    const interval = setInterval(() => {\n      if (ws && ws.readyState === WebSocket.OPEN && videoRef.current) {\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        canvas.width = videoRef.current.videoWidth;\n        canvas.height = videoRef.current.videoHeight;\n        context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n        const frame = canvas.toDataURL('image/jpeg');\n        console.log('Sending frame to backend');\n        ws.send(JSON.stringify({ type: 'video_frame', frame }));\n      }\n    }, 100); // Send frame every 100ms (10fps)\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [ws]);\n\n  return (\n    <div className=\"camera-feed\">\n      <video ref={videoRef} autoPlay playsInline muted />\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\n    </div>\n  );\n};\n\nexport default CameraFeed;\n"],"mappings":";;AACA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,UAAU,GAAGA,CAAC;EAAEC;AAAG,CAAC,KAAK;EAAAC,EAAA;EAC7B,MAAMC,QAAQ,GAAGP,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMQ,SAAS,GAAGR,MAAM,CAAC,IAAI,CAAC;EAE9BC,SAAS,CAAC,MAAM;IACd,MAAMQ,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;UAAEC,KAAK,EAAE;QAAK,CAAC,CAAC;QACzE,IAAIP,QAAQ,CAACQ,OAAO,EAAE;UACpBR,QAAQ,CAACQ,OAAO,CAACC,SAAS,GAAGN,MAAM;QACrC;MACF,CAAC,CAAC,OAAOO,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEF,GAAG,CAAC;MAChD;IACF,CAAC;IAEDR,WAAW,CAAC,CAAC;IAEb,MAAMW,QAAQ,GAAGC,WAAW,CAAC,MAAM;MACjC,IAAIhB,EAAE,IAAIA,EAAE,CAACiB,UAAU,KAAKC,SAAS,CAACC,IAAI,IAAIjB,QAAQ,CAACQ,OAAO,EAAE;QAC9D,MAAMU,MAAM,GAAGjB,SAAS,CAACO,OAAO;QAChC,MAAMW,OAAO,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;QACvCF,MAAM,CAACG,KAAK,GAAGrB,QAAQ,CAACQ,OAAO,CAACc,UAAU;QAC1CJ,MAAM,CAACK,MAAM,GAAGvB,QAAQ,CAACQ,OAAO,CAACgB,WAAW;QAC5CL,OAAO,CAACM,SAAS,CAACzB,QAAQ,CAACQ,OAAO,EAAE,CAAC,EAAE,CAAC,EAAEU,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACK,MAAM,CAAC;QACtE,MAAMG,KAAK,GAAGR,MAAM,CAACS,SAAS,CAAC,YAAY,CAAC;QAC5ChB,OAAO,CAACiB,GAAG,CAAC,0BAA0B,CAAC;QACvC9B,EAAE,CAAC+B,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;UAAEC,IAAI,EAAE,aAAa;UAAEN;QAAM,CAAC,CAAC,CAAC;MACzD;IACF,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;;IAET,OAAO,MAAM;MACXO,aAAa,CAACpB,QAAQ,CAAC;IACzB,CAAC;EACH,CAAC,EAAE,CAACf,EAAE,CAAC,CAAC;EAER,oBACEF,OAAA;IAAKsC,SAAS,EAAC,aAAa;IAAAC,QAAA,gBAC1BvC,OAAA;MAAOwC,GAAG,EAAEpC,QAAS;MAACqC,QAAQ;MAACC,WAAW;MAACC,KAAK;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACnD/C,OAAA;MAAQwC,GAAG,EAAEnC,SAAU;MAAC2C,KAAK,EAAE;QAAEC,OAAO,EAAE;MAAO;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnD,CAAC;AAEV,CAAC;AAAC5C,EAAA,CA1CIF,UAAU;AAAAiD,EAAA,GAAVjD,UAAU;AA4ChB,eAAeA,UAAU;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}